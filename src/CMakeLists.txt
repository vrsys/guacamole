# determine source and header files
file(GLOB_RECURSE GUACAMOLE_SRC RELATIVE ${CMAKE_CURRENT_SOURCE_DIR}
    gua/*.c
    gua/*.cpp
    ../include/gua/*.h
    ../include/gua/*.hpp
)

LINK_DIRECTORIES(${LIB_PATHS})

INCLUDE_DIRECTORIES(guacamole ${INCLUDE_PATHS})

ADD_LIBRARY( guacamole SHARED
    ${GUACAMOLE_SRC}
)

MESSAGE(${CMAKE_SYSTEM_VERSION})

IF (MSVC)
    GET_WIN32_WINNT(WIN_VERSION)
    SET_TARGET_PROPERTIES(guacamole PROPERTIES COMPILE_FLAGS "-D GUA_LIBRARY -D _WIN32_WINNT=${WIN_VERSION}")
ENDIF(MSVC)

TARGET_LINK_LIBRARIES( guacamole debug ${LIBS} optimized ${LIBS})

ADD_DEPENDENCIES(guacamole guarc)
